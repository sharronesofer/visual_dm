============================= test session starts ==============================
platform darwin -- Python 3.11.5, pytest-8.0.0, pluggy-1.5.0 -- /Users/Sharrone/Visual_DM/venv/bin/python3.11
cachedir: .pytest_cache
rootdir: /Users/Sharrone/Visual_DM
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-0.21.1, mock-3.14.0, cov-6.1.1
asyncio: mode=Mode.AUTO
collecting ... 
----------------------------- live log collection ------------------------------
2025-05-06 10:47:29 [    INFO] Visual DM startup (__init__.py:99)
collected 0 items / 1 error

==================================== ERRORS ====================================
________________ ERROR collecting tests/test_loot_generator.py _________________
tests/test_loot_generator.py:6: in <module>
    from app.combat.loot_generator import (
app/__init__.py:102: in <module>
    app = create_app()
app/__init__.py:84: in create_app
    init_db(app)
app/core/database.py:41: in init_db
    db.create_all()
venv/lib/python3.11/site-packages/flask_sqlalchemy/extension.py:900: in create_all
    self._call_for_binds(bind_key, "create_all")
venv/lib/python3.11/site-packages/flask_sqlalchemy/extension.py:881: in _call_for_binds
    getattr(metadata, op_name)(bind=engine)
venv/lib/python3.11/site-packages/sqlalchemy/sql/schema.py:5825: in create_all
    bind._run_ddl_visitor(
venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py:3254: in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
venv/lib/python3.11/site-packages/sqlalchemy/engine/base.py:2460: in _run_ddl_visitor
    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)
venv/lib/python3.11/site-packages/sqlalchemy/sql/visitors.py:664: in traverse_single
    return meth(obj, **kw)
venv/lib/python3.11/site-packages/sqlalchemy/sql/ddl.py:896: in visit_metadata
    collection = sort_tables_and_constraints(
venv/lib/python3.11/site-packages/sqlalchemy/sql/ddl.py:1328: in sort_tables_and_constraints
    dependent_on = fkc.referred_table
venv/lib/python3.11/site-packages/sqlalchemy/sql/schema.py:4742: in referred_table
    return self.elements[0].column.table
venv/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py:1140: in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
venv/lib/python3.11/site-packages/sqlalchemy/sql/schema.py:3159: in column
    return self._resolve_column()
venv/lib/python3.11/site-packages/sqlalchemy/sql/schema.py:3182: in _resolve_column
    raise exc.NoReferencedTableError(
E   sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'regions.world_id' could not find table 'worlds' with which to generate a foreign key to target column 'id'
=========================== short test summary info ============================
ERROR tests/test_loot_generator.py - sqlalchemy.exc.NoReferencedTableError: F...
!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!
=============================== 1 error in 2.17s ===============================
