============================= test session starts ==============================
platform darwin -- Python 3.11.5, pytest-8.0.0, pluggy-1.5.0 -- /Users/Sharrone/Dreamforge/venv/bin/python3.11
cachedir: .pytest_cache
rootdir: /Users/Sharrone/Dreamforge
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-0.21.1, mock-3.14.0, cov-6.1.1
asyncio: mode=Mode.AUTO
collecting ... collected 4 items

tests/test_loot_schema.py::test_loot_schema_tables PASSED                [ 25%]
tests/test_loot_schema.py::test_loot_schema_tables_exist FAILED          [ 50%]
tests/test_loot_schema.py::test_loot_items_columns FAILED                [ 75%]
tests/test_loot_schema.py::test_loot_history_foreign_keys FAILED         [100%]

=================================== FAILURES ===================================
________________________ test_loot_schema_tables_exist _________________________
tests/test_loot_schema.py:66: in test_loot_schema_tables_exist
    assert not missing, f"Missing tables: {missing}"
E   AssertionError: Missing tables: {'loot_container_contents', 'loot_locations', 'loot_shops', 'loot_containers', 'loot_analytics', 'loot_history', 'loot_items', 'loot_shop_inventory'}
E   assert not {'loot_analytics', 'loot_container_contents', 'loot_containers', 'loot_history', 'loot_items', 'loot_locations', ...}
___________________________ test_loot_items_columns ____________________________
tests/test_loot_schema.py:70: in test_loot_items_columns
    columns = {col['name'] for col in inspector.get_columns('loot_items')}
venv/lib/python3.11/site-packages/sqlalchemy/engine/reflection.py:859: in get_columns
    col_defs = self.dialect.get_columns(
<string>:2: in get_columns
    ???
venv/lib/python3.11/site-packages/sqlalchemy/engine/reflection.py:97: in cache
    ret = fn(self, con, *args, **kw)
venv/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/base.py:2250: in get_columns
    raise exc.NoSuchTableError(
E   sqlalchemy.exc.NoSuchTableError: loot_items
________________________ test_loot_history_foreign_keys ________________________
tests/test_loot_schema.py:76: in test_loot_history_foreign_keys
    fks = inspector.get_foreign_keys('loot_history')
venv/lib/python3.11/site-packages/sqlalchemy/engine/reflection.py:1047: in get_foreign_keys
    return self.dialect.get_foreign_keys(
<string>:2: in get_foreign_keys
    ???
venv/lib/python3.11/site-packages/sqlalchemy/engine/reflection.py:97: in cache
    ret = fn(self, con, *args, **kw)
venv/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/base.py:2445: in get_foreign_keys
    table_data = self._get_table_sql(connection, table_name, schema=schema)
<string>:2: in _get_table_sql
    ???
venv/lib/python3.11/site-packages/sqlalchemy/engine/reflection.py:88: in cache
    return fn(self, con, *args, **kw)
venv/lib/python3.11/site-packages/sqlalchemy/dialects/sqlite/base.py:2754: in _get_table_sql
    raise exc.NoSuchTableError(f"{schema_expr}{table_name}")
E   sqlalchemy.exc.NoSuchTableError: loot_history
============================= slowest 10 durations =============================
0.01s setup    tests/test_loot_schema.py::test_loot_schema_tables

(9 durations < 0.005s hidden.  Use -vv to show these durations.)
=========================== short test summary info ============================
FAILED tests/test_loot_schema.py::test_loot_schema_tables_exist - AssertionEr...
FAILED tests/test_loot_schema.py::test_loot_items_columns - sqlalchemy.exc.No...
FAILED tests/test_loot_schema.py::test_loot_history_foreign_keys - sqlalchemy...
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 3 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
========================= 3 failed, 1 passed in 0.57s ==========================
