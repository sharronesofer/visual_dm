# Visual DM Backend Configuration
# Copy this file to .env and update the values for your environment

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL=sqlite:///./visual_dm.db
# For production, use PostgreSQL:
# DATABASE_URL=postgresql://user:password@localhost/visual_dm

# =============================================================================
# API CONFIGURATION  
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
DEBUG=true
LOG_LEVEL=info

# =============================================================================
# LLM SYSTEM CONFIGURATION
# =============================================================================

# Model Provider API Keys
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here
PERPLEXITY_API_KEY=your_perplexity_api_key_here

# Local Ollama Configuration
OLLAMA_HOST=localhost:11434
OLLAMA_ENABLED=true

# Model Selection Strategy
LLM_PRIMARY_STRATEGY=local  # local, cloud, hybrid
LLM_FALLBACK_ENABLED=true
LLM_CACHE_ENABLED=true
LLM_CACHE_TTL=3600  # Cache TTL in seconds

# Performance Settings
LLM_MAX_CONCURRENT_REQUESTS=5
LLM_REQUEST_TIMEOUT=30
LLM_RETRY_ATTEMPTS=3

# Default Model Configuration
LLM_DEFAULT_TEMPERATURE=0.7
LLM_DEFAULT_MAX_TOKENS=2048

# Specific Model Overrides
LLM_DIALOGUE_MODEL=local:mistral:7b-instruct
LLM_NARRATIVE_MODEL=local:codellama:13b-instruct
LLM_GENERAL_MODEL=local:llama2:13b-chat
LLM_FALLBACK_MODEL=openai:gpt-4

# Cost Tracking
LLM_COST_TRACKING_ENABLED=true
LLM_MONTHLY_BUDGET_USD=100.00

# =============================================================================
# HARDWARE OPTIMIZATION
# =============================================================================

# Memory Management
LLM_MEMORY_LIMIT_GB=16
LLM_QUANTIZATION_ENABLED=true
LLM_QUANTIZATION_BITS=4

# GPU Configuration
CUDA_VISIBLE_DEVICES=0
GPU_MEMORY_FRACTION=0.8

# =============================================================================
# PERFORMANCE MONITORING
# =============================================================================

# Analytics and Metrics
ANALYTICS_ENABLED=true
PERFORMANCE_MONITORING=true
MODEL_METRICS_ENABLED=true

# Logging Configuration
LLM_LOG_REQUESTS=true
LLM_LOG_RESPONSES=false  # Set to true for debugging (be careful with sensitive data)
LLM_LOG_PERFORMANCE=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Configuration - CRITICAL: Generate strong secret keys
JWT_SECRET_KEY=your_jwt_secret_key_here_MUST_BE_32_CHARS_MIN
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7
MAX_CONCURRENT_SESSIONS=5

# Environment Configuration
ENVIRONMENT=development  # development, test, staging, production
ALLOW_TEST_CREDENTIALS=false  # Only set to true in development/test

# CORS Configuration
FRONTEND_URL=https://your-production-domain.com
BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# API Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# File Upload Security
MAX_FILE_SIZE_MB=16
ALLOWED_FILE_EXTENSIONS=png,jpg,jpeg,gif,pdf,txt,md

# Session Security
SECURE_COOKIES=true  # Set to true in production
SAMESITE_COOKIE_POLICY=strict

# =============================================================================
# GAME SYSTEM CONFIGURATION
# =============================================================================

# World Generation
WORLD_GENERATION_ENABLED=true
PROCEDURAL_CONTENT_ENABLED=true

# Real-time Features
WEBSOCKET_ENABLED=true
REAL_TIME_SYNC_ENABLED=true

# Content Caching
CONTENT_CACHE_ENABLED=true
CONTENT_CACHE_SIZE_MB=500

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Hot Reload
AUTO_RELOAD=true
RELOAD_DIRS=backend/systems,backend/infrastructure

# Testing
TEST_DATABASE_URL=sqlite:///./test_visual_dm.db
PYTEST_TIMEOUT=30

# Mock Services (for testing without API keys)
MOCK_LLM_RESPONSES=false
MOCK_EXTERNAL_APIS=false

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Environment
ENVIRONMENT=development  # development, staging, production

# Production Settings (only used when ENVIRONMENT=production)
SECURE_COOKIES=true
CORS_ORIGINS=https://your-domain.com
SSL_REDIRECT=true

# Monitoring
SENTRY_DSN=your_sentry_dsn_here
HEALTH_CHECK_ENABLED=true

# =============================================================================
# HARDWARE RECOMMENDATIONS
# =============================================================================

# For optimal performance with 3-5 concurrent local model instances:
# 
# RECOMMENDED HARDWARE:
# - GPU: RTX 4070 Ti (16GB VRAM) or better
# - RAM: 32GB DDR4/DDR5
# - Storage: 1TB NVMe SSD (for model storage)
# - Network: 100Mbps+ for model downloads
#
# MINIMUM HARDWARE:  
# - GPU: RTX 3060 (12GB VRAM)
# - RAM: 16GB DDR4
# - Storage: 500GB SSD
# - Network: 25Mbps+
#
# CLOUD FALLBACK ONLY:
# - GPU: Not required
# - RAM: 8GB
# - Storage: 50GB
# - Network: 10Mbps+ (for API calls)

# =============================================================================
# MODEL DOWNLOAD URLS (for reference)
# =============================================================================

# Download models using: ollama pull <model_name>
#
# Primary Models:
# - ollama pull llama2:13b-chat
# - ollama pull mistral:7b-instruct  
# - ollama pull codellama:13b-instruct
#
# Alternative Models:
# - ollama pull llama2:7b-chat (lower VRAM requirements)
# - ollama pull vicuna:13b (alternative conversation model)
# - ollama pull wizard-coder:15b (enhanced coding model) 